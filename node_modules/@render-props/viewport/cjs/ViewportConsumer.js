'use strict'

var _interopRequireWildcard = require('@babel/runtime/helpers/interopRequireWildcard')

var _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault')

exports.__esModule = true
exports.default = ViewportConsumer

var _react = _interopRequireDefault(require('react'))

var _propTypes = _interopRequireDefault(require('prop-types'))

var _ViewportContext = _interopRequireWildcard(require('./ViewportContext'))

/**
const ViewportContext = () => (
  <ViewportConsumer>
    {
      ({inFullView}) => (
        <div>
          header fully in view?
          {JSON.stringify(inFullView(document.getElementById('main-header')))}
        </div>
      )
    }
  </ViewportConsumer>
)
**/
function ViewportConsumer(props) {
  function Consumer(context) {
    return props.children(context)
  }

  let observer

  if (props.observe === void 0) {
    observer = _ViewportContext.observe.any
  } else if (Array.isArray(props.observe)) {
    observer = props.observe[0]

    for (let x = 1; x < props.observe.length; x++) {
      observer = _ViewportContext.observe | props.observe[x]
    }
  } else {
    observer = _ViewportContext.observe[props.observe]
  }

  return _react.default.createElement(_ViewportContext.default.Consumer, {
    unstable_observedBits: observer,
    children: Consumer,
  })
}

ViewportConsumer.propTypes = {
  children: _propTypes.default.func.isRequired,
}
