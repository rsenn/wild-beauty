'use strict'

var _interopRequireDefault = require('@babel/runtime/helpers/interopRequireDefault')

exports.__esModule = true
exports.loadImage = loadImage
exports.default = _default

var _cancelablePromise = _interopRequireDefault(require('cancelable-promise'))

function loadImage(img) {
  return new _cancelablePromise.default(function(resolve, reject) {
    if (img.complete === true || img.naturalHeight > 0) {
      resolve({
        target: img,
      })
    } else {
      img.onload = resolve
      img.onerror = reject
    }
  })
}

function _ref(resolve) {
  return resolve()
}

function _ref2(resolve) {
  return resolve([])
}

function _default(el) {
  if (!el) return new _cancelablePromise.default(_ref)
  const images = el.getElementsByTagName('img')

  if (images === null || images.length === 0) {
    return new _cancelablePromise.default(_ref2)
  }

  const imgs = []

  for (let x = 0; x < images.length; x++) {
    imgs.push(loadImage(images[x]))
  }

  return _cancelablePromise.default.all(imgs)
}
